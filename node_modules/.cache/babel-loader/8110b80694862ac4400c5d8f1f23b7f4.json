{"ast":null,"code":"// @ is an alias to /src\nimport EventCard from \"@/components/EventCard.vue\";\nimport EventService from \"@/services/EventService.js\"; // import axios from 'axios'\n\nexport default {\n  name: \"PatientList\",\n  props: {\n    page: {\n      type: Number,\n      required: true\n    }\n  },\n  components: {\n    EventCard // register it as a child component\n\n  },\n\n  data() {\n    return {\n      events: null,\n      totalEvents: 0,\n      search: \"\"\n    };\n  },\n\n  computed: {\n    hasNextPage() {\n      let totalPages = Math.ceil(this.totalEvents / 5);\n      return this.page < totalPages;\n    }\n\n  },\n\n  // eslint-disable-next-line no-unused-vars\n  beforeRouteEnter(routeTo, routeFrom, next) {\n    EventService.getEvents(5, parseInt(routeTo.query.page) || 1).then(response => {\n      next(comp => {\n        comp.events = response.data;\n        comp.totalEvents = response.headers[\"x-total-count\"];\n      });\n    }).catch(() => {\n      next({\n        name: \"NetworkError \"\n      });\n    });\n  },\n\n  beforeRouteUpdate(routeTo, routeFrom, next) {\n    EventService.getEvents(5, parseInt(routeTo.query.page) || 1).then(res => {\n      this.events = res.data;\n      this.totalEvents = res.headers[\"x-total-count\"];\n      next();\n    }).catch(() => {\n      next({\n        name: \"NetworkError\"\n      });\n    });\n  }\n\n};","map":{"version":3,"mappings":"AA6BA;AACA,OAAOA,SAAP,MAAsB,4BAAtB;AACA,OAAOC,YAAP,MAAyB,4BAAzB,C,CACA;;AACA,eAAe;EACbC,IAAI,EAAE,aADO;EAEbC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,IAAI,EAAEC,MADF;MAEJC,QAAQ,EAAE;IAFN;EADD,CAFM;EAQbC,UAAU,EAAE;IACVR,SADU,CACC;;EADD,CARC;;EAYbS,IAAI,GAAG;IACL,OAAO;MACLC,MAAM,EAAE,IADH;MAELC,WAAW,EAAE,CAFR;MAGLC,MAAM,EAAE;IAHH,CAAP;EAKD,CAlBY;;EAmBbC,QAAQ,EAAE;IACRC,WAAW,GAAG;MACZ,IAAIC,UAAS,GAAIC,IAAI,CAACC,IAAL,CAAU,KAAKN,WAAL,GAAmB,CAA7B,CAAjB;MACA,OAAO,KAAKP,IAAL,GAAYW,UAAnB;IACD;;EAJO,CAnBG;;EAyBb;EACAG,gBAAgB,CAACC,OAAD,EAAUC,SAAV,EAAqBC,IAArB,EAA2B;IACzCpB,YAAY,CAACqB,SAAb,CAAuB,CAAvB,EAA0BC,QAAQ,CAACJ,OAAO,CAACK,KAAR,CAAcpB,IAAf,CAAR,IAAgC,CAA1D,EACGqB,IADH,CACSC,QAAD,IAAc;MAClBL,IAAI,CAAEM,IAAD,IAAU;QACbA,IAAI,CAACjB,MAAL,GAAcgB,QAAQ,CAACjB,IAAvB;QACAkB,IAAI,CAAChB,WAAL,GAAmBe,QAAQ,CAACE,OAAT,CAAiB,eAAjB,CAAnB;MACD,CAHG,CAAJ;IAID,CANH,EAOGC,KAPH,CAOS,MAAM;MACXR,IAAI,CAAC;QAAEnB,IAAI,EAAE;MAAR,CAAD,CAAJ;IACD,CATH;EAUD,CArCY;;EAsCb4B,iBAAiB,CAACX,OAAD,EAAUC,SAAV,EAAqBC,IAArB,EAA2B;IAC1CpB,YAAY,CAACqB,SAAb,CAAuB,CAAvB,EAA0BC,QAAQ,CAACJ,OAAO,CAACK,KAAR,CAAcpB,IAAf,CAAR,IAAgC,CAA1D,EACGqB,IADH,CACSM,GAAD,IAAS;MACb,KAAKrB,MAAL,GAAcqB,GAAG,CAACtB,IAAlB;MACA,KAAKE,WAAL,GAAmBoB,GAAG,CAACH,OAAJ,CAAY,eAAZ,CAAnB;MACAP,IAAI;IACL,CALH,EAMGQ,KANH,CAMS,MAAM;MACXR,IAAI,CAAC;QAAEnB,IAAI,EAAE;MAAR,CAAD,CAAJ;IACD,CARH;EASD;;AAhDY,CAAf","names":["EventCard","EventService","name","props","page","type","Number","required","components","data","events","totalEvents","search","computed","hasNextPage","totalPages","Math","ceil","beforeRouteEnter","routeTo","routeFrom","next","getEvents","parseInt","query","then","response","comp","headers","catch","beforeRouteUpdate","res"],"sourceRoot":"","sources":["/Users/supachokjirarojkul/Desktop/SE331-2022-Project-1/src/views/PatientList.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"events\">\n      <EventCard v-for=\"event in events\" :key=\"event.id\" :event=\"event\" />\n\n      <div class=\"pagination\">\n        <router-link\n          id=\"page-prev\"\n          :to=\"{ name: 'PatientList', query: { page: page - 1 } }\"\n          rel=\"prev\"\n          v-if=\"page != 1\"\n        >\n          Prev Page\n        </router-link>\n        ||\n        <router-link\n          id=\"page-next\"\n          :to=\"{ name: 'PatientList', query: { page: page + 1 } }\"\n          rel=\"next\"\n          v-if=\"hasNextPage\"\n        >\n          Next Page\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport EventCard from \"@/components/EventCard.vue\";\nimport EventService from \"@/services/EventService.js\";\n// import axios from 'axios'\nexport default {\n  name: \"PatientList\",\n  props: {\n    page: {\n      type: Number,\n      required: true,\n    },\n  },\n  components: {\n    EventCard, // register it as a child component\n  },\n\n  data() {\n    return {\n      events: null,\n      totalEvents: 0,\n      search: \"\",\n    };\n  },\n  computed: {\n    hasNextPage() {\n      let totalPages = Math.ceil(this.totalEvents / 5);\n      return this.page < totalPages;\n    },\n  },\n  // eslint-disable-next-line no-unused-vars\n  beforeRouteEnter(routeTo, routeFrom, next) {\n    EventService.getEvents(5, parseInt(routeTo.query.page) || 1)\n      .then((response) => {\n        next((comp) => {\n          comp.events = response.data;\n          comp.totalEvents = response.headers[\"x-total-count\"];\n        });\n      })\n      .catch(() => {\n        next({ name: \"NetworkError \" });\n      });\n  },\n  beforeRouteUpdate(routeTo, routeFrom, next) {\n    EventService.getEvents(5, parseInt(routeTo.query.page) || 1)\n      .then((res) => {\n        this.events = res.data;\n        this.totalEvents = res.headers[\"x-total-count\"];\n        next();\n      })\n      .catch(() => {\n        next({ name: \"NetworkError\" });\n      });\n  },\n};\n</script>\n\n<style>\n@import url(\"https://fonts.googleapis.com/css2?family=Montserrat&display=swap\");\n\n* {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n  font-family: \"Montserrat\", sans-serif;\n}\n\nbody {\n  min-height: 100vh;\n  background-color: rgb(234, 242, 255);\n}\n\ninput {\n  display: block;\n  width: 350px;\n  margin: 20px auto;\n  padding: 10px 45px;\n  background-size: 15px 15px;\n  font-size: 16px;\n  border: none;\n  border-radius: 5px;\n  box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px,\n    rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;\n}\n\n.events {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}